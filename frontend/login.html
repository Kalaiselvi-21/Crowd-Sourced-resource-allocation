<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Login</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <h2>Login</h2>

    <input type="email" id="email" placeholder="Email" required /><br /><br />
    <input
      type="password"
      id="password"
      placeholder="Password"
      required
    /><br /><br />

    <button onclick="login()">Login</button>

    <p>
      Don't have an account?
      <a href="register.html">Register</a>
    </p>

    <script src="js/api.js"></script>
    <script>
      async function login() {
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        if (!email || !password) {
          alert("Please fill all fields");
          return;
        }

        try {
          const data = await apiRequest("/auth/login", "POST", {
            email,
            password,
          });

          if (data.token) {
            localStorage.setItem("token", data.token);
            alert("Login successful");
            window.location.href = "dashboard.html";
          } else {
            alert(data.message || "Invalid login");
          }
        } catch (err) {
          alert("Server error");
        }
      }
    </script>
  </body>
</html>
